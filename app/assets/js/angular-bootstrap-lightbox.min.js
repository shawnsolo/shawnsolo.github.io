angular.module("bootstrapLightbox",["ui.bootstrap"]);try{angular.module("angular-loading-bar"),angular.module("bootstrapLightbox").requires.push("angular-loading-bar")}catch(e){}try{angular.module("ngTouch"),angular.module("bootstrapLightbox").requires.push("ngTouch")}catch(e){}angular.module("bootstrapLightbox").run(["$templateCache",function(t){"use strict";t.put("lightbox.html",'<div class=modal-body ng-swipe-left=Lightbox.nextImage() ng-swipe-right=Lightbox.prevImage()><div class=lightbox-image-container ng-click=Lightbox.nextImage()><img lightbox-src={{Lightbox.imageUrl}} alt=""><div class=left><i ng-click=Lightbox.prevImage() class="fa fa-angle-left "></i></div><div class=right><i ng-click=Lightbox.prevImage() class="fa fa-angle-right "></i></div></div></div>')}]),angular.module("bootstrapLightbox").service("ImageLoader",["$q",function(t){this.load=function(e){var i=t.defer(),a=new Image;return a.onload=function(){("boolean"==typeof this.complete&&this.complete===!1||"number"==typeof this.naturalWidth&&0===this.naturalWidth)&&i.reject(),i.resolve(a)},a.onerror=function(){i.reject()},a.src=e,i.promise}}]),angular.module("bootstrapLightbox").provider("Lightbox",function(){this.templateUrl="lightbox.html",this.getImageUrl=function(t){return t.url},this.getImageCaption=function(t){return t.caption},this.calculateImageDimensionLimits=function(t){return t.windowWidth>=768?{maxWidth:t.windowWidth-92,maxHeight:t.windowHeight-126}:{maxWidth:t.windowWidth-52,maxHeight:t.windowHeight-86}},this.calculateModalDimensions=function(t){var e=Math.max(400,t.imageDisplayWidth+32),i=Math.max(200,t.imageDisplayHeight+66);return(e>=t.windowWidth-20||t.windowWidth<768)&&(e="auto"),i>=t.windowHeight&&(i="auto"),{width:e,height:i}},this.$get=["$document","$injector","$modal","$timeout","ImageLoader",function(t,e,i,a,n){var o=e.has("cfpLoadingBar")?e.get("cfpLoadingBar"):null,g={};return g.images=[],g.index=-1,g.templateUrl=this.templateUrl,g.getImageUrl=this.getImageUrl,g.getImageCaption=this.getImageCaption,g.calculateImageDimensionLimits=this.calculateImageDimensionLimits,g.calculateModalDimensions=this.calculateModalDimensions,g.keyboardNavEnabled=!1,g.image={},g.modalInstance=null,g.openModal=function(t,e){return g.images=t,g.setImage(e),g.modalInstance=i.open({templateUrl:g.templateUrl,controller:["$scope",function(t){t.Lightbox=g,g.keyboardNavEnabled=!0}],windowClass:"lightbox-modal"}),g.modalInstance.result["finally"](function(){g.images=[],g.index=1,g.image={},g.imageUrl=null,g.imageCaption=null,g.keyboardNavEnabled=!1,o&&o.complete()}),g.modalInstance},g.closeModal=function(t){return g.modalInstance.close(t)},g.setImage=function(t){if(!(t in g.images))throw"Invalid image.";o&&o.start();var e=function(){g.index=t,g.image=g.images[g.index],o&&o.complete()},i=g.getImageUrl(g.images[t]);n.load(i).then(function(){e(),g.imageUrl=i,g.imageCaption=g.getImageCaption(g.image)},function(){e(),g.imageUrl="//:0",g.imageCaption="Failed to load image"})},g.firstImage=function(){g.setImage(0)},g.prevImage=function(){g.setImage((g.index-1+g.images.length)%g.images.length)},g.nextImage=function(){g.setImage((g.index+1)%g.images.length)},g.lastImage=function(){g.setImage(g.images.length-1)},g.setImages=function(t){g.images=t,g.setImage(g.index)},t.bind("keydown",function(t){if(g.keyboardNavEnabled){var e=null;switch(t.which){case 39:e="nextImage";break;case 37:e="prevImage"}null!==e&&-1===["input","textarea"].indexOf(t.target.tagName.toLowerCase())&&(a(function(){g[e]()}),t.preventDefault())}}),g}]}),angular.module("bootstrapLightbox").directive("lightboxSrc",["$window","ImageLoader","Lightbox",function(t,e,i){var a=function(t){var e=t.width,i=t.height,a=t.minWidth,n=t.minHeight,o=t.maxWidth,g=t.maxHeight,l=e,r=i;return a>e&&n>i?e/i>o/g?(r=n,l=Math.round(e*n/i)):(l=a,r=Math.round(i*a/e)):a>e?(l=a,r=Math.round(i*a/e)):n>i&&(r=n,l=Math.round(e*n/i)),e>o&&i>g?e/i>o/g?(l=o,r=Math.round(i*o/e)):(r=g,l=Math.round(e*g/i)):e>o?(l=o,r=Math.round(i*o/e)):i>g&&(r=g,l=Math.round(e*g/i)),{width:l||0,height:r||0}},n=0,o=0;return{link:function(g,l,r){var h=function(){var e=t.innerWidth,g=t.innerHeight,r=i.calculateImageDimensionLimits({windowWidth:e,windowHeight:g,imageWidth:n,imageHeight:o}),h=a(angular.extend({width:n,height:o,minWidth:1,minHeight:1,maxWidth:3e3,maxHeight:3e3},r)),m=i.calculateModalDimensions({windowWidth:e,windowHeight:g,imageDisplayWidth:h.width,imageDisplayHeight:h.height});l.css({width:h.width+"px",height:h.height+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-dialog")).css({width:m.width+"px"}),angular.element(document.querySelector(".lightbox-modal .modal-content")).css({height:m.height+"px"})};g.$watch(function(){return r.lightboxSrc},function(t){l[0].src="//:0",e.load(t).then(function(e){n=e.naturalWidth,o=e.naturalHeight,h(),l[0].src=t})}),angular.element(t).on("resize",h)}}}]);